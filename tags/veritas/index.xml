<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Veritas on Brian Walker's tecnotes</title><link>https://bdwalk.onrender.com/tags/veritas/</link><description>Recent content in Veritas on Brian Walker's tecnotes</description><generator>Hugo -- 0.151.2</generator><language>en-uk</language><lastBuildDate>Wed, 01 Oct 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://bdwalk.onrender.com/tags/veritas/index.xml" rel="self" type="application/rss+xml"/><item><title>Arctera[Veritas] Storage Foundation : Identify LUN of DMP ( Dynamic Multipath) device.</title><link>https://bdwalk.onrender.com/posts/veritas_300925_post1/</link><pubDate>Wed, 01 Oct 2025 00:00:00 +0000</pubDate><guid>https://bdwalk.onrender.com/posts/veritas_300925_post1/</guid><description>&lt;p&gt;This article shows you how to identify LUN ID that maps to a Arctera[Veritas] Storage Foundation DMP ( Dynamic Multipath).&lt;/p&gt;
&lt;h2 id="steps"&gt;Steps&lt;/h2&gt;
&lt;h6 id="1--list-fibre-cards-and-encloser-details-for-future-reference"&gt;1) List fibre cards and encloser details for future reference.&lt;/h6&gt;
&lt;pre&gt;&lt;code&gt;From your Linux shell
# systool -c fc_host -v |egrep &amp;quot;Class Devic|port_name|port_state|port_id&amp;quot;
Class Device = &amp;quot;host11&amp;quot;
Device path = &amp;quot;/sys/devices/pci0000:00/0000:00:04.0/0000:08:00.0/host11&amp;quot;
port_id = &amp;quot;0x000000&amp;quot;
port_name = &amp;quot;0x210000e08b8068ae&amp;quot;
port_state = &amp;quot;LinkDown&amp;quot;
Class Device = &amp;quot;host13&amp;quot;
Device path = &amp;quot;/sys/devices/pci0000:00/0000:00:04.0/0000:08:00.0/host13&amp;quot;
port_id = &amp;quot;0x000000&amp;quot;
port_name = &amp;quot;0x210000e08b8068ae&amp;quot;
port_state = &amp;quot;Online&amp;quot;
Class Device = &amp;quot;host14&amp;quot;
Device path = &amp;quot;/sys/devices/pci0000:00/0000:00:04.0/0000:08:00.0/host10&amp;quot;
port_id = &amp;quot;0x000000&amp;quot;
port_name = &amp;quot;0x210000e08b8068ae&amp;quot;
port_state = &amp;quot;Linkdown&amp;quot;
Class Device = &amp;quot;host3&amp;quot;
Device path = &amp;quot;/sys/devices/pci0000:00/0000:00:04.0/0000:08:00.0/host3&amp;quot;
port_id = &amp;quot;0x000000&amp;quot;
port_name = &amp;quot;0x210000e08b8068ae&amp;quot;
port_state = &amp;quot;Online&amp;quot;
#xmdmpadm listenclosure all
ENCLR_NAME ENCLR_TYPE ENCLR_SN Status ARRARY_TYPE LUN COUNT FIRMWARE
emc1 EMC 000297800422 CONNECTED VMAX-A/A 14 5978
disk Disk DISKS CONNECTED Disk 1 5.26
&lt;/code&gt;&lt;/pre&gt;
&lt;h6 id="2-identify-dmpnodename"&gt;2) Identify dmpnodename&lt;/h6&gt;
&lt;pre&gt;&lt;code&gt;# df -h |grep cluster
# /dev/vx/dsk/RS_cluster_T2/lv_cluster 32GB 1.4G 31 5% /cluster
# vxdg list RS_cluster_T2
Group: RS_cluster_T2
dgid : 1716266100.420.hkl2135435
import-id : 1024.41
version: 290
aligment : 8192 (bytes)
local_activation: read-write
ssb: on
autotagging : on
copies: nconfig=default nlog=default
config: seqno=0.1158 permlen=51360 free=51360 templen=4 loglen=4096
config disk emc1_16f9 copy 1 len=51360 state=clean online
log disk emc1_16f9 copy 1 len=4096
&lt;/code&gt;&lt;/pre&gt;
&lt;h6 id="3-use-vxdmpadm-getsubpaths-to-identify-the-os-devices-that-represents-the-paths-to-your-lun"&gt;3) Use vxdmpadm getsubpaths to identify the OS devices that represents the paths to your LUN.&lt;/h6&gt;
&lt;pre&gt;&lt;code&gt;# vxdmpadm getsubpaths dmpnodename=emc1_16f9 # ( dmpnodename DEVICE)
NAME STATE[A] PATH-TYPE[M] CTL_NAME ENCLR_TYPE ENCLR_NAME ATTRS Priority
sdav ENABLED[A] - c3 EMC emc1 - -
sdbj ENABLED[A] - c13 EMC emc1 - -
sdl ENABLED[A] - c13 EMC emc1 - -
sdz ENABLED[A] - c3 EMC emc1 - -
&lt;/code&gt;&lt;/pre&gt;
&lt;h6 id="3-either-use"&gt;3) Either use&lt;/h6&gt;
&lt;pre&gt;&lt;code&gt;#ls -ld /sys/block/sd*/device |grep -e sdz -e sdl -e sdbj -e sdav
* ^
lrwxrwxrwx. 1 root root 0 Aug 21 14:47 /sys/block/sdav/device ../../../13:0:2:3
lrwxrwxrwx. 1 root root 0 Aug 21 14:47 /sys/block/sdaj/device ../../../13:0:3:3
lrwxrwxrwx. 1 root root 0 Aug 21 14:47 /sys/block/sdl/device ../../../3:0:2:3
lrwxrwxrwx. 1 root root 0 Aug 21 14:47 /sys/block/sdz/device ../../../3:0:3:3 **
Key * Each host id 13, and 3 ( See systool outout ) Class Device = &amp;quot;host13&amp;quot;, and Class Device = &amp;quot;host3&amp;quot;
^ LUN ID
#sg_map -x -sd |grep sdz
/dev/sg25 3 0 3 3 0 /dev/sdz
#sg_map -x -sd |grep sdav
/dev/sg25 13 0 2 3 0 /dev/sdav
etc for sdl and sdbj
Notes, on sg_map -x
after each active sg device name is displayed there are five digits: &amp;lt;host_number&amp;gt; &amp;lt;bus&amp;gt; &amp;lt;scsi_id&amp;gt; &amp;lt;lun&amp;gt; &amp;lt;scsi_type&amp;gt; e.g. 3 0 3 3 0, and 13 0 2 3 0 in example above.
or
#lsblk -S |grep sdz
sdz 3:0:3:3 disk EMC SYMETRIX 5978 fc
* ^
* Host from systools
^ LUN ID
Then get fdisk /dev/sdz Get Disk size. This will also help to find the Lun within the Storage Array !
So you LUN ID is 3, on EMC SYMETRIX array with firmware 5978.
&lt;/code&gt;&lt;/pre&gt;</description></item></channel></rss>