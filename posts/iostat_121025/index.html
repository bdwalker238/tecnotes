<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Identifing IO performance problem with iostat. | Brian Walker's tecnotes</title><meta name=keywords content="Linux"><meta name=description content="Quick article, what to look for when assessing iostat output due to slow performance on a  database ( DB2, MySQL, Postgres, Oracle  ) server. If you observed CPU run queue been blocked/high software interrupts. Here is a sample from  iostat   where I  diagnose wait IO root cause of a database hang , which was wait IO -
If you observe
$ iostat -kxy 10 1

Linux 4.18.0-553.61.1.el8_10.x86_64 (hostname)     03/29/2023      _x86_64_        (32 CPU)   

10/06/25  16:31:50
avg-cpu:  %user   %nice %system %iowait  %steal   %idle
       7.87    0.00    0.00    3.53    0.00    85.28

Device	r/s     w/s     rkB/s     wkB/s   rrqm/s   wrqm/s  %rrqm  %wrqm r_await w_await aqu-sz rareq-sz wareq-sz  svctm  %util

etc
sdd	1.32	3.11	21.93	  62.34	  0.0	   0.01	   0.4    0.47  4.46	78.46	0.25	16.62	20.04	4.75	2.211 
 etc

sdl	1.31	3.11	21.93	  21.94	  0.0	   0.01	   0.3    0.47  4.46	78.09	0.25	16.62	20.04	4.75	2.211	
etc

$ cat  /sys/block/sdl/device/queue_depth
64

$  cat  /sys/block/sdd/device/queue_depth
64

Figure 1"><meta name=author content><link rel=canonical href=https://bdwalk.onrender.com/posts/iostat_121025/><link crossorigin=anonymous href=/assets/css/stylesheet.2211ca3164be7830024f6aad2b3a2e520843a64f8f048445c3401c1249aa051d.css integrity="sha256-IhHKMWS+eDACT2qtKzouUghDpk+PBIRFw0AcEkmqBR0=" rel="preload stylesheet" as=style><link rel=icon href=https://bdwalk.onrender.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://bdwalk.onrender.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://bdwalk.onrender.com/favicon-32x32.png><link rel=apple-touch-icon href=https://bdwalk.onrender.com/apple-touch-icon.png><link rel=mask-icon href=https://bdwalk.onrender.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://bdwalk.onrender.com/posts/iostat_121025/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://bdwalk.onrender.com/posts/iostat_121025/"><meta property="og:site_name" content="Brian Walker's tecnotes"><meta property="og:title" content="Identifing IO performance problem with iostat. "><meta property="og:description" content="Quick article, what to look for when assessing iostat output due to slow performance on a database ( DB2, MySQL, Postgres, Oracle ) server. If you observed CPU run queue been blocked/high software interrupts. Here is a sample from iostat where I diagnose wait IO root cause of a database hang , which was wait IO -
If you observe $ iostat -kxy 10 1 Linux 4.18.0-553.61.1.el8_10.x86_64 (hostname) 03/29/2023 _x86_64_ (32 CPU) 10/06/25 16:31:50 avg-cpu: %user %nice %system %iowait %steal %idle 7.87 0.00 0.00 3.53 0.00 85.28 Device	r/s w/s rkB/s wkB/s rrqm/s wrqm/s %rrqm %wrqm r_await w_await aqu-sz rareq-sz wareq-sz svctm %util etc sdd	1.32	3.11	21.93	62.34	0.0	0.01	0.4 0.47 4.46	78.46	0.25	16.62	20.04	4.75	2.211 etc sdl	1.31	3.11	21.93	21.94	0.0	0.01	0.3 0.47 4.46	78.09	0.25	16.62	20.04	4.75	2.211	etc $ cat /sys/block/sdl/device/queue_depth 64 $ cat /sys/block/sdd/device/queue_depth 64 Figure 1"><meta property="og:locale" content="en-uk"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-10-12T00:00:00+00:00"><meta property="article:modified_time" content="2025-10-12T00:00:00+00:00"><meta property="article:tag" content="Linux"><meta name=twitter:card content="summary"><meta name=twitter:title content="Identifing IO performance problem with iostat. "><meta name=twitter:description content="Quick article, what to look for when assessing iostat output due to slow performance on a  database ( DB2, MySQL, Postgres, Oracle  ) server. If you observed CPU run queue been blocked/high software interrupts. Here is a sample from  iostat   where I  diagnose wait IO root cause of a database hang , which was wait IO -
If you observe
$ iostat -kxy 10 1

Linux 4.18.0-553.61.1.el8_10.x86_64 (hostname)     03/29/2023      _x86_64_        (32 CPU)   

10/06/25  16:31:50
avg-cpu:  %user   %nice %system %iowait  %steal   %idle
       7.87    0.00    0.00    3.53    0.00    85.28

Device	r/s     w/s     rkB/s     wkB/s   rrqm/s   wrqm/s  %rrqm  %wrqm r_await w_await aqu-sz rareq-sz wareq-sz  svctm  %util

etc
sdd	1.32	3.11	21.93	  62.34	  0.0	   0.01	   0.4    0.47  4.46	78.46	0.25	16.62	20.04	4.75	2.211 
 etc

sdl	1.31	3.11	21.93	  21.94	  0.0	   0.01	   0.3    0.47  4.46	78.09	0.25	16.62	20.04	4.75	2.211	
etc

$ cat  /sys/block/sdl/device/queue_depth
64

$  cat  /sys/block/sdd/device/queue_depth
64

Figure 1"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://bdwalk.onrender.com/posts/"},{"@type":"ListItem","position":2,"name":"Identifing IO performance problem with iostat. ","item":"https://bdwalk.onrender.com/posts/iostat_121025/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Identifing IO performance problem with iostat. ","name":"Identifing IO performance problem with iostat. ","description":"Quick article, what to look for when assessing iostat output due to slow performance on a database ( DB2, MySQL, Postgres, Oracle ) server. If you observed CPU run queue been blocked/high software interrupts. Here is a sample from iostat where I diagnose wait IO root cause of a database hang , which was wait IO -\nIf you observe $ iostat -kxy 10 1 Linux 4.18.0-553.61.1.el8_10.x86_64 (hostname) 03/29/2023 _x86_64_ (32 CPU) 10/06/25 16:31:50 avg-cpu: %user %nice %system %iowait %steal %idle 7.87 0.00 0.00 3.53 0.00 85.28 Device\tr/s w/s rkB/s wkB/s rrqm/s wrqm/s %rrqm %wrqm r_await w_await aqu-sz rareq-sz wareq-sz svctm %util etc sdd\t1.32\t3.11\t21.93\t62.34\t0.0\t0.01\t0.4 0.47 4.46\t78.46\t0.25\t16.62\t20.04\t4.75\t2.211 etc sdl\t1.31\t3.11\t21.93\t21.94\t0.0\t0.01\t0.3 0.47 4.46\t78.09\t0.25\t16.62\t20.04\t4.75\t2.211\tetc $ cat /sys/block/sdl/device/queue_depth 64 $ cat /sys/block/sdd/device/queue_depth 64 Figure 1\n","keywords":["Linux"],"articleBody":"Quick article, what to look for when assessing iostat output due to slow performance on a database ( DB2, MySQL, Postgres, Oracle ) server. If you observed CPU run queue been blocked/high software interrupts. Here is a sample from iostat where I diagnose wait IO root cause of a database hang , which was wait IO -\nIf you observe $ iostat -kxy 10 1 Linux 4.18.0-553.61.1.el8_10.x86_64 (hostname) 03/29/2023 _x86_64_ (32 CPU) 10/06/25 16:31:50 avg-cpu: %user %nice %system %iowait %steal %idle 7.87 0.00 0.00 3.53 0.00 85.28 Device\tr/s w/s rkB/s wkB/s rrqm/s wrqm/s %rrqm %wrqm r_await w_await aqu-sz rareq-sz wareq-sz svctm %util etc sdd\t1.32\t3.11\t21.93\t62.34\t0.0\t0.01\t0.4 0.47 4.46\t78.46\t0.25\t16.62\t20.04\t4.75\t2.211 etc sdl\t1.31\t3.11\t21.93\t21.94\t0.0\t0.01\t0.3 0.47 4.46\t78.09\t0.25\t16.62\t20.04\t4.75\t2.211\tetc $ cat /sys/block/sdl/device/queue_depth 64 $ cat /sys/block/sdd/device/queue_depth 64 Figure 1\nThe w_await column in Figure 1 indicated San array, wasn’ keeping with amount of IO operations issued by the database. This can be confirmed @ https://access.redhat.com/articles/524353 -\nThe avgqu-sz is the average number of io contained within both the io scheduler queue and storage lun queue. If the reported avgqu-sz in the sample is much less than the allowed lun queue_depth (and the sample time is small so averaging isn’t hiding a much larger peak queue size), then there is little time spent within the scheduler queue. The scheduler will continue passing io to the driver while the number of io still outstanding to the driver (io currently being worked on by storage) remains under the lun’s queue_depth limit. In such cases, then the await time is dominated by storage servicing time alone. Under these circumstances(low avgqu-sz), high await time is due to storage side issues.\n","wordCount":"294","inLanguage":"en","datePublished":"2025-10-12T00:00:00Z","dateModified":"2025-10-12T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://bdwalk.onrender.com/posts/iostat_121025/"},"publisher":{"@type":"Organization","name":"Brian Walker's tecnotes","logo":{"@type":"ImageObject","url":"https://bdwalk.onrender.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bdwalk.onrender.com/ accesskey=h title="Brian Walker's tecnotes (Alt + H)">Brian Walker's tecnotes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bdwalk.onrender.com/ title=Home><span>Home</span></a></li><li><a href=https://bdwalk.onrender.com/posts title=Posts><span>Posts</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Identifing IO performance problem with iostat.</h1><div class=post-meta><span title='2025-10-12 00:00:00 +0000 UTC'>October 12, 2025</span></div></header><div class=post-content><p>Quick article, what to look for when assessing iostat output due to slow performance on a database ( DB2, MySQL, Postgres, Oracle ) server. If you observed CPU run queue been blocked/high software interrupts. Here is a sample from iostat where I diagnose wait IO root cause of a database hang , which was wait IO -</p><h2 id=if-you-observe>If you observe<a hidden class=anchor aria-hidden=true href=#if-you-observe>#</a></h2><pre><code>$ iostat -kxy 10 1

Linux 4.18.0-553.61.1.el8_10.x86_64 (hostname)     03/29/2023      _x86_64_        (32 CPU)   

10/06/25  16:31:50
avg-cpu:  %user   %nice %system %iowait  %steal   %idle
       7.87    0.00    0.00    3.53    0.00    85.28

Device	r/s     w/s     rkB/s     wkB/s   rrqm/s   wrqm/s  %rrqm  %wrqm r_await w_await aqu-sz rareq-sz wareq-sz  svctm  %util

etc
sdd	1.32	3.11	21.93	  62.34	  0.0	   0.01	   0.4    0.47  4.46	78.46	0.25	16.62	20.04	4.75	2.211 
 etc

sdl	1.31	3.11	21.93	  21.94	  0.0	   0.01	   0.3    0.47  4.46	78.09	0.25	16.62	20.04	4.75	2.211	
etc

$ cat  /sys/block/sdl/device/queue_depth
64

$  cat  /sys/block/sdd/device/queue_depth
64
</code></pre><p>Figure 1</p><p>The w_await column in Figure 1 indicated San array, wasn’ keeping with amount of IO operations issued by the database. This can be confirmed @ <a href=https://access.redhat.com/articles/524353>https://access.redhat.com/articles/524353</a> -</p><p>The avgqu-sz is the average number of io contained within both the io scheduler queue and storage lun queue. If the reported avgqu-sz in the sample is much less than the allowed lun queue_depth (and the sample time is small so averaging isn&rsquo;t hiding a much larger peak queue size), then there is little time spent within the scheduler queue. The scheduler will continue passing io to the driver while the number of io still outstanding to the driver (io currently being worked on by storage) remains under the lun&rsquo;s queue_depth limit. In such cases, then the await time is dominated by storage servicing time alone. Under these circumstances(low avgqu-sz), high await time is due to storage side issues.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://bdwalk.onrender.com/tags/linux/>Linux</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://bdwalk.onrender.com/>Brian Walker's tecnotes</a></span> ·</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>