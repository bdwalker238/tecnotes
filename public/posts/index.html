<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | Brian Walker's tecnotes</title><meta name=keywords content><meta name=description content="Posts - Brian Walker's tecnotes"><meta name=author content><link rel=canonical href=https://bdwalk.onrender.com/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://bdwalk.onrender.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://bdwalk.onrender.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://bdwalk.onrender.com/favicon-32x32.png><link rel=apple-touch-icon href=https://bdwalk.onrender.com/apple-touch-icon.png><link rel=mask-icon href=https://bdwalk.onrender.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://bdwalk.onrender.com/posts/index.xml><link rel=alternate hreflang=en href=https://bdwalk.onrender.com/posts/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://bdwalk.onrender.com/posts/"><meta property="og:site_name" content="Brian Walker's tecnotes"><meta property="og:title" content="Posts"><meta property="og:locale" content="en-uk"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://bdwalk.onrender.com/posts/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bdwalk.onrender.com/ accesskey=h title="Brian Walker's tecnotes (Alt + H)">Brian Walker's tecnotes</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bdwalk.onrender.com/ title=Home><span>Home</span></a></li><li><a href=https://bdwalk.onrender.com/posts title=Posts><span class=active>Posts</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Identify LUN of DMP ( Dynamic Multipath metanode name</h2></header><div class=entry-content><p>This article shows you how to interrogate Arctera[Verita] Storage Foundation DMP ( Dynamic Multipath ) metanode name , to discover the lun id of a storage array.
Steps 1) List fibre cards for future reference. From your shell # systool -c fc_host -v |egrep "Class Devic|port_name|port_state|port_id" Class Device = "host11" Device path = "/sys/devices/pci0000:00/0000:00:04.0/0000:08:00.0/host11" port_id = "0x000000" port_name = "0x210000e08b8068ae" port_state = "LinkDown" Class Device = "host13" Device path = "/sys/devices/pci0000:00/0000:00:04.0/0000:08:00.0/host13" port_id = "0x000000" port_name = "0x210000e08b8068ae" port_state = "Online" Class Device = "host14" Device path = "/sys/devices/pci0000:00/0000:00:04.0/0000:08:00.0/host10" port_id = "0x000000" port_name = "0x210000e08b8068ae" port_state = "Linkdown" Class Device = "host3" Device path = "/sys/devices/pci0000:00/0000:00:04.0/0000:08:00.0/host3" port_id = "0x000000" port_name = "0x210000e08b8068ae" port_state = "Online" 2) Use vxdmpadm getsubpaths to identify the OS devices that represents the paths to your LUN. vxdmpadm getsubpaths dmpnodename=emc1_16f9 ( dmpnodename DEVICE) NAME STATE[A] PATH-TYPE[M] CTL_NAME ENCLR_TYPE ENCLR_NAME ATTRS Priority sdav ENABLED[A] - c3 EMC emc1 - - sdbj ENABLED[A] - c13 EMC emc1 - - sdl ENABLED[A] - c13 EMC emc1 - - sdz ENABLED[A] - c3 EMC emc1 - - 3) Either use ls -ld /sys/block/sd*/device |grep -e sdz -e sdl -e sdbj -e sdav * ^ lrwxrwxrwx. 1 root root 0 Aug 21 14:47 /sys/block/sdav/device ../../../13:0:2:3 lrwxrwxrwx. 1 root root 0 Aug 21 14:47 /sys/block/sdaj/device ../../../13:0:3:3 lrwxrwxrwx. 1 root root 0 Aug 21 14:47 /sys/block/sdl/device ../../../3:0:2:3 lrwxrwxrwx. 1 root root 0 Aug 21 14:47 /sys/block/sdz/device ../../../3:0:3:3 **
...</p></div><footer class=entry-footer><span title='2025-08-18 00:00:00 +0000 UTC'>August 18, 2025</span></footer><a class=entry-link aria-label="post link to Identify LUN of  DMP ( Dynamic Multipath metanode name" href=https://bdwalk.onrender.com/posts/veritas_300925_post1/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Pgbackrest utilising a Azure Storage Account - Using a SAS Key - Part 2</h2></header><div class=entry-content><p>This article shows you how to Generate the Storage SAS token, and update the PgBackrest Config file. It also describes items to consider if you want to use Azure Storage Account using SAS keys for authentication & Pgbackrest.
Steps 1) Retrieve the Storage Account key. account_key=$(az storage account keys list \ --resource-group "azureresourcegroup" \ --account-name "storage_account_name" \ --query "[0].value" \ --output tsv) 2) Generate the Storage SAS token. sas_token=$(az storage container generate-sas \ --account-name "storage_account_name" \ --name "container_name" \ --permissions acdlrw \ --expiry "expirydate" \ --https-only \ --account-key "account_key" \ --output tsv) 3) Replace the old token with the new token awk -v sas_token="$sas_token" '/^repo1-azure-key=/ {$0="repo1-azure-key=" sas_token} {print}' "$pg_backrest_conf" > /tmp/pgbackrest.conf.tmp && mv /tmp/pgbackrest.conf.tmp "$pg_backrest_conf" 4) Run pgbackrest backup. su - postgres
select pg_switch_wal(); select pg_switch_wal(); exit;
$ pgbackrest –stanza=sname –type=full backup
...</p></div><footer class=entry-footer><span title='2025-08-18 00:00:00 +0000 UTC'>August 18, 2025</span></footer><a class=entry-link aria-label="post link to Pgbackrest utilising a Azure Storage Account - Using a SAS Key - Part 2" href=https://bdwalk.onrender.com/posts/postgres_1882025_post1/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Pgbackrest utilising a Azure Storage Account - Using a SAS Key - Part 1</h2></header><div class=entry-content><p>This article shows you how to setup pgbackrest to utilise a azure storage account to store backups and archived postgres wal logs.
Steps 1) Create Storage Account First, setup a Azure Storage Account, either using Terraform, ARM Template Azure Cli, or via Azure Portal.
Mandatory settings for the Azure Storage Account.
Resouce Group - Name of your resource group. Storage Account Name - Name of storage account. Region - Your deployment Region. Primary Service - Azure Blob Storage or Azure Data Lake Storage Gen 2. Enable Storage account key access.
...</p></div><footer class=entry-footer><span title='2025-08-09 00:00:00 +0000 UTC'>August 9, 2025</span></footer><a class=entry-link aria-label="post link to Pgbackrest utilising a Azure Storage Account - Using a SAS Key - Part 1" href=https://bdwalk.onrender.com/posts/postgres_0882025_post1/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Postgres pg_service file</h2></header><div class=entry-content><p>What is the pg_service file ? This article highlights the importance of the Postgres pg_service file (pg_service.conf). The pg_service file allows libpq connection parameters to be associated with a single service name as part of command argument or when setting PGSERVICE environment variable. In the Next section , are some examples with s ‘service’ be used.
Commmand Line examples pg_basebackup –pgdata=$PGDATA –dbname=service=basebackup –verbose –progress –checkpoint=fast –write-recovery-conf –wal-method=stream –waldir=/psql/pglog/13 –create-slot –slot=pgstandby2
...</p></div><footer class=entry-footer><span title='2025-07-31 00:00:00 +0000 UTC'>July 31, 2025</span></footer><a class=entry-link aria-label="post link to Postgres pg_service file" href=https://bdwalk.onrender.com/posts/postgres_3172025_post1/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>My first blog post</h2></header><div class=entry-content><p>Hi first blog!</p></div><footer class=entry-footer><span title='2025-07-30 00:00:00 +0000 UTC'>July 30, 2025</span></footer><a class=entry-link aria-label="post link to My first blog post" href=https://bdwalk.onrender.com/posts/test_3072025_post1/></a></article></main><footer class=footer><span>&copy; 2025 <a href=https://bdwalk.onrender.com/>Brian Walker's tecnotes</a></span> ·</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>